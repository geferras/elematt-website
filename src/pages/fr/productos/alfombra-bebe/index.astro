---
import Layout from '@layouts/Layout.astro';
import NotificationButtons from '@components/NotificationButtons.astro';
import ProductSafetyInfo from '@components/product/ProductSafetyInfo.astro';
import { useTranslations } from '@i18n/utils';

const lang = 'fr';
const t = useTranslations(lang);

const producto = {
  nombre: t('product.babyMat.variantsPageTitle'),
  subtitulo: t('product.babyMat.variantsPageSubtitle'),
  caras: {
    cara1: {
      titulo: t('product.babyMat.coastalVillageTitle'),
      descripcion: t('product.babyMat.coastalVillageDescription')
    },
    cara2: {
      titulo: t('product.babyMat.tropicalJungleTitle'),
      descripcion: t('product.babyMat.tropicalJungleDescription')
    }
  },
  variantes: [
    {
      id: 'compacta',
      nombre: t('product.babyMat.compact'),
      dimensiones: '150 × 180 cm',
      grosor: '1.5 cm',
      precio: t('product.babyMat.viewOnAmazon'),
      descripcion: t('product.babyMat.compactDescription'),
      imagen: '/products/baby-mat/shared/hero-alfombra.jpeg',
      url: '/fr/productos/alfombra-bebe/150x180',
      amazonLink: 'https://www.amazon.es/dp/B0DPXQY7YN',
      destacado: false,
      caracteristicas: [
        t('product.babyMat.compactFeature1'),
        t('product.babyMat.compactFeature2'),
        t('product.babyMat.compactFeature3')
      ],
      especificaciones: {
        peso: '2.5 kg',
        plegada: '50 × 60 × 15 cm',
        material: t('product.babyMat.foamPU')
      }
    },
    {
      id: 'xl',
      nombre: 'XL',
      dimensiones: '180 × 200 cm',
      grosor: '1.5 cm',
      precio: t('product.babyMat.viewOnAmazon'),
      descripcion: t('product.babyMat.xlDescription'),
      imagen: '/products/baby-mat/shared/hero-alfombra.jpeg',
      url: '/fr/productos/alfombra-bebe/180x200',
      amazonLink: 'https://www.amazon.es/dp/B0DPXQY7YN',
      destacado: true,
      caracteristicas: [
        t('product.babyMat.xlFeature1'),
        t('product.babyMat.xlFeature2'),
        t('product.babyMat.xlFeature3')
      ],
      especificaciones: {
        peso: '3.2 kg',
        plegada: '60 × 67 × 15 cm',
        material: t('product.babyMat.foamPU')
      }
    }
  ]
};
---

<Layout
  title={t('product.babyMat.variantsPageTitle')}
  description={t('product.babyMat.variantsPageDescription')}
  image="/products/baby-mat/shared/hero-alfombra.jpeg"
  keywords={t('product.babyMat.seoKeywords150')}
  type="product"
>
  <!-- Hero Minimalista -->
  <section class="hero-producto">
    <div class="container-hero">
      <h1 class="producto-titulo">{producto.nombre}</h1>
      <p class="producto-subtitulo">{producto.subtitulo}</p>
    </div>
  </section>

  <!-- Información de Seguridad del Producto (OBLIGATORIO - Cumplimiento UE) -->
  <ProductSafetyInfo />

  <!-- Dos Caras de la Alfombra -->
  <section class="caras-alfombra">
    <div class="container-caras">
      <div class="caras-grid">
        <!-- Cara 1: Pueblo Costero -->
        <div class="cara-card">
          <div class="cara-numero">01</div>
          <h2 class="cara-titulo">{producto.caras.cara1.titulo}</h2>
          <p class="cara-descripcion">{producto.caras.cara1.descripcion}</p>
        </div>

        <!-- Cara 2: Selva Tropical -->
        <div class="cara-card">
          <div class="cara-numero">02</div>
          <h2 class="cara-titulo">{producto.caras.cara2.titulo}</h2>
          <p class="cara-descripcion">{producto.caras.cara2.descripcion}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Selector de Variantes -->
  <section class="variantes-selector" id="variantes">
    <div class="container-variantes">
      <div class="variantes-header">
        <h2 class="variantes-titulo">{t('product.babyMat.chooseSize')}</h2>
        <p class="variantes-subtitulo">{t('product.babyMat.chooseSizeSubtitle')}</p>
      </div>

      <div class="variantes-grid">
        {producto.variantes.map((variante) => (
          <div class={`variante-card ${variante.destacado ? 'destacado' : ''}`}>
            {variante.destacado && (
              <div class="badge-destacado">
                <span>{t('product.babyMat.mostPopular')}</span>
              </div>
            )}

            <div class="variante-imagen">
              <img
                src={variante.imagen}
                alt={`${producto.nombre} ${variante.nombre}`}
                loading="lazy"
              />
            </div>

            <div class="variante-contenido">
              <div class="variante-header">
                <h3 class="variante-nombre">{variante.nombre}</h3>
                <div class="variante-dimensiones">
                  <span class="dimension-principal">{variante.dimensiones}</span>
                  <span class="dimension-grosor">Grosor: {variante.grosor}</span>
                </div>
              </div>

              <p class="variante-descripcion">{variante.descripcion}</p>

              <div class="variante-specs">
                <div class="spec-item">
                  <svg class="spec-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                  </svg>
                  <span>{t('product.babyMat.folded')}: {variante.especificaciones.plegada}</span>
                </div>
                <div class="spec-item">
                  <svg class="spec-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"/>
                  </svg>
                  <span>{t('product.babyMat.weight')}: {variante.especificaciones.peso}</span>
                </div>
              </div>

              <div class="variante-actions">
                <a href={variante.url} class="btn-detalles">
                  <span>{t('product.babyMat.viewDetails')}</span>
                  <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                  </svg>
                </a>
                <a href={variante.amazonLink} target="_blank" rel="noopener noreferrer" class="btn-amazon">
                  <svg class="amazon-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.14c.138-.06.234-.1.293-.13.226-.088.39-.046.525.13.12.174.09.336-.12.48-.256.19-.6.41-1.006.654-1.244.743-2.64 1.316-4.185 1.726-1.544.406-3.045.61-4.502.61-3.16 0-6.123-.663-8.89-1.997-1.656-.796-3.01-1.86-4.06-3.19-.12-.164-.12-.29 0-.38zm22.505-3.484c-.393-.586-.955-.88-1.687-.88-.613 0-1.103.213-1.47.64-.366.427-.55.96-.55 1.6 0 .613.18 1.11.54 1.492.36.382.84.573 1.44.573.524 0 .963-.15 1.32-.45.356-.3.534-.67.534-1.11 0-.11-.01-.24-.03-.39-.02-.15-.03-.27-.03-.36 0-.573-.19-1.03-.57-1.37zm-3.21 2.484c.02-.196.03-.36.03-.49 0-.866-.24-1.58-.72-2.14-.48-.56-1.13-.84-1.95-.84-.71 0-1.3.24-1.77.72-.47.48-.71 1.08-.71 1.8 0 .78.25 1.42.75 1.92.5.5 1.16.75 1.98.75.85 0 1.54-.28 2.07-.84.53-.56.8-1.27.8-2.13 0-.04-.01-.11-.03-.21-.02-.1-.03-.18-.03-.24zm-10.95-8.42c0 .74-.18 1.32-.54 1.74-.36.42-.87.63-1.53.63-.5 0-.92-.15-1.26-.45-.34-.3-.51-.68-.51-1.14 0-.52.19-.94.57-1.26.38-.32.88-.48 1.5-.48.61 0 1.09.16 1.44.48.35.32.53.73.53 1.23zm-4.97 8.42c.02-.196.03-.36.03-.49 0-.866-.24-1.58-.72-2.14-.48-.56-1.13-.84-1.95-.84-.71 0-1.3.24-1.77.72-.47.48-.71 1.08-.71 1.8 0 .78.25 1.42.75 1.92.5.5 1.16.75 1.98.75.85 0 1.54-.28 2.07-.84.53-.56.8-1.27.8-2.13 0-.04-.01-.11-.03-.21-.02-.1-.03-.18-.03-.24z"/>
                  </svg>
                  <span>{t('product.babyMat.viewOnAmazon')}</span>
                </a>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Botones de Notificación (Fijos en la esquina) -->
  <NotificationButtons
    productId="alfombra-bebe"
    productName={t('product.babyMat.name')}
    position="fixed"
  />

</Layout>

<style>
  /* ===== HERO PRODUCTO ===== */
  .hero-producto {
    background: linear-gradient(135deg, var(--color-lino) 0%, var(--color-perla) 100%);
    padding: 6rem 0 4rem;
    text-align: center;
  }

  .container-hero {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .producto-titulo {
    font-family: var(--font-primary);
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 700;
    color: var(--color-gris-oscuro);
    margin-bottom: 1.5rem;
    line-height: 1.2;
  }

  .producto-subtitulo {
    font-family: var(--font-secondary);
    font-size: clamp(1.1rem, 2vw, 1.5rem);
    color: var(--color-salvia-dark);
    font-weight: 400;
    letter-spacing: 0.5px;
  }

  /* ===== CARAS DE LA ALFOMBRA ===== */
  .caras-alfombra {
    background-color: white;
    padding: 5rem 0;
  }

  .container-caras {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .caras-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 3rem;
  }

  .cara-card {
    position: relative;
    padding: 3rem 2.5rem;
    background: linear-gradient(135deg, var(--color-lino) 0%, white 100%);
    border-radius: 1.5rem;
    border: 1px solid rgba(168, 181, 160, 0.2);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .cara-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    border-color: var(--color-salvia-dark);
  }

  .cara-numero {
    font-family: var(--font-primary);
    font-size: 3.5rem;
    font-weight: 700;
    color: var(--color-salvia);
    opacity: 0.3;
    line-height: 1;
    margin-bottom: 1rem;
  }

  .cara-titulo {
    font-family: var(--font-primary);
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-gris-oscuro);
    margin-bottom: 1.5rem;
    line-height: 1.3;
  }

  .cara-descripcion {
    font-family: var(--font-secondary);
    font-size: 1.05rem;
    line-height: 1.8;
    color: #555;
  }

  /* ===== SELECTOR DE VARIANTES ===== */
  .variantes-selector {
    background-color: var(--color-perla);
    padding: 5rem 0;
  }

  .container-variantes {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .variantes-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .variantes-titulo {
    font-family: var(--font-primary);
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    color: var(--color-gris-oscuro);
    margin-bottom: 1rem;
  }

  .variantes-subtitulo {
    font-family: var(--font-secondary);
    font-size: 1.2rem;
    color: #666;
  }

  .variantes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2.5rem;
  }

  .variante-card {
    position: relative;
    background: white;
    border-radius: 1.5rem;
    overflow: hidden;
    color: inherit;
    display: flex;
    flex-direction: column;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid transparent;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  }

  .variante-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
    border-color: var(--color-salvia-dark);
  }

  .variante-card.destacado {
    border-color: var(--color-melon-dark);
  }

  .badge-destacado {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    background: linear-gradient(135deg, var(--color-melon-dark), var(--color-melon));
    color: white;
    padding: 0.5rem 1.25rem;
    border-radius: 2rem;
    font-family: var(--font-primary);
    font-size: 0.85rem;
    font-weight: 600;
    z-index: 10;
    box-shadow: 0 4px 12px rgba(212, 134, 111, 0.4);
  }

  .variante-imagen {
    width: 100%;
    height: 280px;
    overflow: hidden;
    background-color: var(--color-lino);
  }

  .variante-imagen img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .variante-card:hover .variante-imagen img {
    transform: scale(1.08);
  }

  .variante-contenido {
    padding: 2rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .variante-header {
    margin-bottom: 1.5rem;
  }

  .variante-nombre {
    font-family: var(--font-primary);
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--color-gris-oscuro);
    margin-bottom: 0.75rem;
  }

  .variante-dimensiones {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .dimension-principal {
    font-family: var(--font-primary);
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--color-melon-dark);
  }

  .dimension-grosor {
    font-family: var(--font-secondary);
    font-size: 0.95rem;
    color: #777;
  }

  .variante-descripcion {
    font-family: var(--font-secondary);
    font-size: 1.05rem;
    line-height: 1.6;
    color: #555;
    margin-bottom: 1.5rem;
  }

  .variante-specs {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 2rem;
    padding: 1.25rem;
    background-color: var(--color-lino);
    border-radius: 0.75rem;
  }

  .spec-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-family: var(--font-secondary);
    font-size: 0.95rem;
    color: #555;
  }

  .spec-icon {
    width: 20px;
    height: 20px;
    color: var(--color-salvia-dark);
    flex-shrink: 0;
    stroke-width: 2;
  }

  .variante-actions {
    margin-top: auto;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .btn-detalles,
  .btn-amazon {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1rem 1.5rem;
    border-radius: 0.75rem;
    font-family: var(--font-primary);
    font-weight: 600;
    font-size: 1rem;
    text-decoration: none;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .btn-detalles {
    background: linear-gradient(135deg, var(--color-salvia-dark), var(--color-salvia));
    color: white;
    border: 2px solid transparent;
  }

  .btn-detalles:hover {
    background: linear-gradient(135deg, var(--color-salvia), var(--color-salvia-dark));
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(107, 127, 94, 0.3);
  }

  .btn-amazon {
    background: white;
    color: #FF9900;
    border: 2px solid #FF9900;
  }

  .btn-amazon:hover {
    background: #FF9900;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 153, 0, 0.3);
  }

  .btn-icon {
    width: 20px;
    height: 20px;
    stroke-width: 2.5;
    transition: transform 0.3s ease;
  }

  .btn-detalles:hover .btn-icon {
    transform: translateX(4px);
  }

  .amazon-icon {
    width: 20px;
    height: 20px;
    transition: transform 0.3s ease;
  }

  .btn-amazon:hover .amazon-icon {
    transform: scale(1.1);
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 768px) {
    .hero-producto {
      padding: 4rem 0 3rem;
    }

    .caras-alfombra {
      padding: 3rem 0;
    }

    .caras-grid {
      gap: 2rem;
    }

    .cara-card {
      padding: 2rem 1.5rem;
    }

    .variantes-selector {
      padding: 3rem 0;
    }

    .variantes-header {
      margin-bottom: 2.5rem;
    }

    .variantes-grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .variante-imagen {
      height: 220px;
    }

    .badge-destacado {
      top: 1rem;
      right: 1rem;
      font-size: 0.8rem;
      padding: 0.4rem 1rem;
    }
  }
</style>

