---
import Layout from '../../../layouts/Layout.astro';
import Hero from '../../../components/Hero.astro';
import Section from '../../../components/Section.astro';
import NotificationButtons from '../../../components/NotificationButtons.astro';
import ProductSafetyNotice from '../../../components/product/ProductSafetyNotice.astro';
import { getLangFromUrl, useTranslations } from '../../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const producto = {
  amazonLink: 'https://www.amazon.es/dp/B0DPXQY7YN',
  dimensiones: {
    largo: 150,
    ancho: 180,
    grosor: 1.5
  }
};
---

<Layout
  title={t('product.babyMat.seoTitle150')}
  description={t('product.babyMat.seoDescription150')}
  image="/products/baby-mat/shared/hero-alfombra.jpeg"
  keywords={t('product.babyMat.seoKeywords150')}
  type="product"
>
  <!-- Schema.org Product JSON-LD -->
  <script type="application/ld+json" slot="head" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Product",
    "name": t('product.babyMat.name') + ' ' + t('product.babyMat.variant150'),
    "description": t('product.babyMat.seoDescription150'),
    "image": "https://elematt.com/products/baby-mat/shared/hero-alfombra.jpeg",
    "brand": {
      "@type": "Brand",
      "name": "ELEMATT"
    },
    "offers": {
      "@type": "Offer",
      "url": producto.amazonLink,
      "priceCurrency": "EUR",
      "availability": "https://schema.org/InStock",
      "seller": {
        "@type": "Organization",
        "name": "Amazon"
      }
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "5",
      "reviewCount": "1"
    }
  })} />

  <!-- ⚠️ BLOQUE DE SEGURIDAD CRÍTICO - PRIMER ELEMENTO VISIBLE -->
  <div style="padding: 0.5rem 0.5rem 0 0.5rem; background: white;">
    <ProductSafetyNotice />
  </div>

  <!-- Hero con imagen del producto -->
  <Hero
    title={t('product.babyMat.name')}
    subtitle={t('product.babyMat.variant150')}
    description={t('product.babyMat.heroDescription')}
    ctaText={t('product.babyMat.viewOnAmazon')}
    ctaLink={producto.amazonLink}
    backgroundImage="/products/baby-mat/shared/hero-alfombra.jpeg"
  />

  <!-- Historia del Producto -->
  <Section title={t('product.babyMat.storyTitle')} background="lino" centered>
    <div class="max-w-4xl mx-auto">
      <div class="prose prose-lg mx-auto mb-12">
        <p class="text-xl leading-relaxed text-gray-700" set:html={t('product.babyMat.storyText1')} />

        <p class="text-lg leading-relaxed text-gray-600 mt-6" set:html={t('product.babyMat.storyText2')} />
      </div>

      <div class="grid md:grid-cols-2 gap-8 mb-12">
        <!-- Cara A: Pueblo Costero -->
        <div class="card">
          <img
            src="/products/baby-mat/shared/ilustracion-pueblo-costero.png"
            alt={t('product.babyMat.sideATitle')}
            class="img-rounded mb-4"
          />
          <h3 class="text-2xl text-salvia mb-3">{t('product.babyMat.sideATitle')}</h3>
          <p class="text-gray-600">
            {t('product.babyMat.sideADescription')}
          </p>
        </div>

        <!-- Cara B: Selva Tropical -->
        <div class="card">
          <img
            src="/products/baby-mat/shared/ilustracion-selva-tropical.png"
            alt={t('product.babyMat.sideBTitle')}
            class="img-rounded mb-4"
          />
          <h3 class="text-2xl text-salvia mb-3">{t('product.babyMat.sideBTitle')}</h3>
          <p class="text-gray-600">
            {t('product.babyMat.sideBDescription')}
          </p>
        </div>
      </div>

      <div class="bg-blanco p-8 rounded-2xl shadow-md text-center">
        <p class="text-lg italic text-salvia leading-relaxed mb-4">
          {t('home.dedication')}
        </p>
        <p class="text-sm text-gray-600">
          {t('home.dedicationAuthor')}
        </p>
      </div>
    </div>
  </Section>

  <!-- Especificaciones Técnicas -->
  <Section title={t('product.babyMat.specsTitle')} background="perla">
    <div class="max-w-5xl mx-auto">
      <div class="grid md:grid-cols-2 gap-12 items-center mb-12">
        <div>
          <img
            src="/products/baby-mat/shared/producto-real.jpg"
            alt={t('product.babyMat.name')}
            class="img-rounded shadow-lg"
          />
        </div>

        <div class="space-y-6">
          <div class="spec-item">
            <h4 class="text-xl font-semibold text-salvia mb-2">{t('product.babyMat.specDimensionsTitle')}</h4>
            <p class="text-gray-700">
              <strong>{producto.dimensiones.largo} × {producto.dimensiones.ancho} × {producto.dimensiones.grosor} cm</strong><br/>
              {t('product.babyMat.specDimensionsText150')}
            </p>
          </div>

          <div class="spec-item">
            <h4 class="text-xl font-semibold text-salvia mb-2">{t('product.babyMat.specProtectionTitle')}</h4>
            <p class="text-gray-700" set:html={t('product.babyMat.specProtectionText')} />
          </div>

          <div class="spec-item">
            <h4 class="text-xl font-semibold text-salvia mb-2">{t('product.babyMat.specCertificationTitle')}</h4>
            <p class="text-gray-700" set:html={t('product.babyMat.specCertificationText')} />
          </div>

          <div class="spec-item">
            <h4 class="text-xl font-semibold text-salvia mb-2">{t('product.babyMat.specWaterproofTitle')}</h4>
            <p class="text-gray-700">
              {t('product.babyMat.specWaterproofText')}
            </p>
          </div>

          <div class="spec-item">
            <h4 class="text-xl font-semibold text-salvia mb-2">{t('product.babyMat.specReversibleTitle')}</h4>
            <p class="text-gray-700">
              {t('product.babyMat.specReversibleText')}
            </p>
          </div>

          <div class="spec-item">
            <h4 class="text-xl font-semibold text-salvia mb-2">{t('product.babyMat.specPortableTitle')}</h4>
            <p class="text-gray-700">
              {t('product.babyMat.specPortableText')}
            </p>
          </div>
        </div>
      </div>
    </div>
  </Section>

  <!-- Tarjetas Sensoriales -->
  <Section title={t('product.babyMat.cardsTitle')} background="lino">
    <div class="max-w-4xl mx-auto">
      <p class="text-xl text-center text-gray-700 mb-12">
        {t('product.babyMat.cardsDescription')}
      </p>

      <div class="grid md:grid-cols-2 gap-8">
        <div class="card text-center">
          <img
            src="/products/baby-mat/shared/tarjetas-pueblo-costero.png"
            alt={t('product.babyMat.cardsCoastalTitle')}
            class="img-rounded mx-auto mb-4"
          />
          <h4 class="text-lg font-semibold text-salvia mb-2">{t('product.babyMat.cardsCoastalTitle')}</h4>
          <p class="text-sm text-gray-600">
            {t('product.babyMat.cardsCoastalText')}
          </p>
        </div>

        <div class="card text-center">
          <img
            src="/products/baby-mat/shared/tarjetas-selva-tropical.png"
            alt={t('product.babyMat.cardsJungleTitle')}
            class="img-rounded mx-auto mb-4"
          />
          <h4 class="text-lg font-semibold text-salvia mb-2">{t('product.babyMat.cardsJungleTitle')}</h4>
          <p class="text-sm text-gray-600">
            {t('product.babyMat.cardsJungleText')}
          </p>
        </div>
      </div>
    </div>
  </Section>

  <!-- CTA Final -->
  <Section background="perla">
    <div class="text-center max-w-3xl mx-auto">
      <h2 class="text-4xl font-bold text-salvia mb-6">
        {t('product.babyMat.ctaTitle')}
      </h2>
      <p class="text-xl text-gray-700 mb-8">
        {t('product.babyMat.ctaDescription')}
      </p>
      <a href={producto.amazonLink} class="btn btn-primary btn-lg">
        {t('product.babyMat.viewOnAmazon')} →
      </a>
      <p class="text-sm text-gray-500 mt-4">
        {t('product.babyMat.amazonPrime')}
      </p>
    </div>
  </Section>
</Layout>

<style>
  .spec-item {
    padding: 1rem;
    border-left: 4px solid var(--color-melon);
    background: var(--color-blanco);
    border-radius: 0.5rem;
  }

  .prose {
    max-width: none;
  }

  .btn-lg {
    padding: 1.25rem 3rem;
    font-size: 1.25rem;
  }

  /* Mobile First */
  @media (max-width: 768px) {
    .grid {
      gap: 2rem;
    }

    .btn-lg {
      padding: 1rem 2rem;
      font-size: 1.0625rem;
      width: 100%;
    }

    .text-4xl {
      font-size: 1.75rem !important;
      line-height: 1.25 !important;
    }

    .text-xl {
      font-size: 1.0625rem !important;
      line-height: 1.65 !important;
    }

    .text-lg {
      font-size: 1rem !important;
      line-height: 1.7 !important;
    }

    .bg-blanco {
      padding: 1.5rem !important;
    }
  }

  @media (max-width: 480px) {
    .text-4xl {
      font-size: 1.5rem !important;
    }

    .text-3xl {
      font-size: 1.375rem !important;
    }

    .text-2xl {
      font-size: 1.25rem !important;
    }
  }
</style>

<!-- Botones de Notificación (Fijos en la esquina) -->
<NotificationButtons
  productId="alfombra-bebe"
  productName={t('product.babyMat.name')}
  variantId="compacta-150x180"
  variantName={t('product.babyMat.variant150')}
  position="fixed"
/>
